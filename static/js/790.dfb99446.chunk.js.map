{"version":3,"file":"static/js/790.dfb99446.chunk.js","mappings":"oMAEaA,EAAc,SAACC,GACxB,OAA8BC,EAAAA,EAAAA,WAAS,GAAvC,eAAOC,EAAP,KAAgBC,EAAhB,KACA,GAA0BF,EAAAA,EAAAA,UAAS,IAAnC,eAAOG,EAAP,KAAcC,EAAd,KAEMC,EAAQ,mCAAG,8GAETH,GAAW,GAFF,SAGHH,EAAQ,WAAR,KAHG,sDAKTK,EAAS,KAAEE,SALF,uBAOTJ,GAAW,GAPF,0EAAH,qDAWd,MAAO,CAACG,EAAUJ,EAASE,K,+KChB/B,EAAsC,mCAAtC,EAA4F,gCAA5F,EAAqI,sB,UCqIrI,MA5HA,WAEI,OAA0BH,EAAAA,EAAAA,UAAS,MAAnC,eAAOG,EAAP,KAAcC,EAAd,KAGA,GAAsCJ,EAAAA,EAAAA,UAAS,MAA/C,eAAOO,EAAP,KAAoBC,EAApB,KAGA,GAAwBV,EAAAA,EAAAA,IAAW,iBAAC,8FAE1BW,IAAAA,IAAA,UAAaC,EAAAA,GAAb,gCAAsD,CACxDC,SAASC,EAAAA,EAAAA,MACTC,OAAQ,CACJC,OAAQ,EACRC,MAAO,EACPC,aAAc,SAGjBC,MAAK,SAAAC,GACFd,EAAS,MAETe,QAAQC,IAAI,MAAOF,GAEnBC,QAAQC,IAAIF,EAAIG,KAAKd,aAErBC,EAAeU,EAAIG,KAAKd,gBAE3Be,OAAM,SAAAC,GAAQ,IAAD,EACV,iBAAQA,EAAIC,gBAAZ,aAAQ,EAAcC,QAClB,KAAK,IACDrB,EAAS,qDACT,MACJ,KAAK,IACDA,EAAS,gBACT,MACJ,KAAK,IACDA,EAAS,yBACT,MACJ,QACIA,EAAS,kCA/BO,4CAApC,eAAOsB,EAAP,KAAaC,EAAb,KAwCA,OAJAC,EAAAA,EAAAA,YAAU,WACNF,MACD,KAGC,4BACI,iBAAMG,UAAWC,EAAWC,QAASL,EAArC,oBAICvB,IACG,wBACKA,IAIRwB,GACG,SAACK,EAAA,EAAD,IACG7B,GAoDG,yBAnDF,8BACKI,GACG,gBAAKsB,UAAWC,EAAhB,UACI,8BACI,4BACI,2BACI,yBACI,iBAAMD,UAAWC,EAAjB,UACI,kBAAOG,KAAK,kBAGpB,gCAGA,gCAGA,uCAMR,2BACK1B,EAAY2B,KAAI,SAACC,GAAD,OACb,2BACI,yBACI,iBAAMN,UAAWC,EAAjB,UACI,kBAAOG,KAAK,kBAGpB,wBACKE,EAAEC,MAEP,yBACI,SAAC,KAAD,CAAMC,GAAIF,EAAEG,GAAZ,SACKH,EAAEG,QAGX,wBACKH,EAAEI,aAfFJ,EAAEC,cAuBzB,U,qBCzH9B,SAASI,EAAmBC,EAAKC,EAASC,EAAQC,EAAOC,EAAQC,EAAKC,GACpE,IACE,IAAIC,EAAOP,EAAIK,GAAKC,GAChBE,EAAQD,EAAKC,MACjB,MAAO9C,GAEP,YADAwC,EAAOxC,GAIL6C,EAAKE,KACPR,EAAQO,GAERE,QAAQT,QAAQO,GAAOhC,KAAK2B,EAAOC,GAIxB,SAASO,EAAkBC,GACxC,OAAO,WACL,IAAIC,EAAOC,KACPC,EAAOC,UACX,OAAO,IAAIN,SAAQ,SAAUT,EAASC,GACpC,IAAIF,EAAMY,EAAGK,MAAMJ,EAAME,GAEzB,SAASZ,EAAMK,GACbT,EAAmBC,EAAKC,EAASC,EAAQC,EAAOC,EAAQ,OAAQI,GAGlE,SAASJ,EAAOtB,GACdiB,EAAmBC,EAAKC,EAASC,EAAQC,EAAOC,EAAQ,QAAStB,GAGnEqB,OAAMe,O","sources":["hooks/useFetching.ts","webpack://alanominator/./src/pages/adminPages/admin.module.scss?d311","pages/adminPages/VisitorsIPsPage/VisitorsIPsPage.jsx","../node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"],"sourcesContent":["import { useState } from \"react\";\n\nexport const useFetching = (callback: Function) => {\n    const [Loading, setLoading] = useState(false);\n    const [error, setError] = useState('');\n\n    const fetching = async (...args: any) => {\n        try {\n            setLoading(true)\n            await callback(...args)\n        } catch (e: any) { // TODO type error\n            setError(e.message)\n        } finally {\n            setLoading(false)\n        }\n    }\n\n    return [fetching, Loading, error] as const\n}","// extracted by mini-css-extract-plugin\nexport default {\"admin_table_wrapper\":\"admin_admin_table_wrapper__u4mS-\",\"checkbox_wrapper\":\"admin_checkbox_wrapper__QW-Ok\",\"reload\":\"admin_reload__MUw9g\"};","import axios from 'axios';\nimport React from 'react';\nimport { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { basic_url, getHeaders } from '../../../API/APISettings';\nimport Loader from '../../../components/UI/Loader/Loader';\nimport { useFetching } from '../../../hooks/useFetching';\n\nimport cl from '../admin.module.scss'\n\nfunction VisitorsIPsPage() {\n\n    const [error, setError] = useState(null)\n\n\n    const [visitorsIps, setVisitorsIps] = useState(null)\n\n\n    const [func, loading] = useFetching(async () => {\n\n        await axios.get(`${basic_url}/admin_api/get_visitors_ips/`, {\n            headers: getHeaders(),\n            params: {\n                _limit: 2,\n                _page: 3,\n                search_query: \"192\"\n            },\n        })\n            .then(res => {\n                setError(null)\n\n                console.log(\"res\", res)\n\n                console.log(res.data.visitorsIps)\n\n                setVisitorsIps(res.data.visitorsIps)\n            })\n            .catch(err => {\n                switch (err.response?.status) {\n                    case 403:\n                        setError(\"403. Forbidden. Only superusers can get this page\")\n                        break;\n                    case 401:\n                        setError(\"Unauthorized\")\n                        break;\n                    case 500:\n                        setError(\"Internal Server Error\")\n                        break;\n                    default:\n                        setError(\"Smth went wrong. Try again\")\n                }\n            });\n    })\n\n    useEffect(() => {\n        func()\n    }, [])\n\n    return (\n        <div>\n            <span className={cl.reload} onClick={func}>\n                reload\n            </span>\n\n            {error &&\n                <h2>\n                    {error}\n                </h2>\n            }\n\n            {loading ?\n                <Loader />\n                : !error ?\n                    <>\n                        {visitorsIps ?\n                            <div className={cl.admin_table_wrapper}>\n                                <table >\n                                    <thead>\n                                        <tr>\n                                            <th>\n                                                <span className={cl.checkbox_wrapper}>\n                                                    <input type=\"checkbox\" />\n                                                </span>\n                                            </th>\n                                            <th>\n                                                id\n                                            </th>\n                                            <th>\n                                                ip\n                                            </th>\n                                            <th>\n                                                date\n                                            </th>\n                                        </tr>\n                                    </thead>\n\n                                    <tbody>\n                                        {visitorsIps.map((v) =>\n                                            <tr key={v.id}>\n                                                <td>\n                                                    <span className={cl.checkbox_wrapper}>\n                                                        <input type=\"checkbox\" />\n                                                    </span>\n                                                </td>\n                                                <td>\n                                                    {v.id}\n                                                </td>\n                                                <td>\n                                                    <Link to={v.ip}>\n                                                        {v.ip}\n                                                    </Link>\n                                                </td>\n                                                <td>\n                                                    {v.datetime}\n                                                </td>\n                                            </tr>\n                                        )}\n                                    </tbody>\n                                </table>\n                            </div>\n\n                            : ''\n                        }\n                    </>\n                    : <></>\n\n\n\n            }\n\n        </div >\n    )\n}\n\nexport default VisitorsIPsPage;\n\n\n/*\n\n\n            {posts.length && !postsLoading ?\n                posts.map((post) =>\n                    <Post\n                        key={post.id}\n                        book_link={post.link}\n                        image={post.main_photo}\n                        bookName={post.title}\n                        bookAuthor={post.author}\n                        bookPrice={post.price}\n                    />\n                )\n                : !postsLoading && !posts.length && !postsError ?\n                    <span>\n                        Books are not found.\n                    </span>\n                    : ''\n            }\n\n*/","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}"],"names":["useFetching","callback","useState","Loading","setLoading","error","setError","fetching","message","visitorsIps","setVisitorsIps","axios","basic_url","headers","getHeaders","params","_limit","_page","search_query","then","res","console","log","data","catch","err","response","status","func","loading","useEffect","className","cl","onClick","Loader","type","map","v","id","to","ip","datetime","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","done","Promise","_asyncToGenerator","fn","self","this","args","arguments","apply","undefined"],"sourceRoot":""}