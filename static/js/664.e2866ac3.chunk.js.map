{"version":3,"file":"static/js/664.e2866ac3.chunk.js","mappings":"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","sources":["webpack://alanominator/./src/pages/settingsPages/editingPages.module.scss?728f","webpack://alanominator/./src/components/UI/FormInput/FormInput.module.scss?3c58","components/UI/FormInput/FormInput.jsx","hooks/useFetching.ts","pages/settingsPages/EditNamePage/EditNamePage.jsx","webpack://alanominator/./src/pages/settingsPages/components/GoBack/GoBack.module.scss?3334","pages/settingsPages/components/GoBack/GoBack.jsx","webpack://alanominator/./src/pages/settingsPages/components/MainLayout/MainLayout.module.scss?5277","pages/settingsPages/components/MainLayout/MainLayout.jsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"form_wrapper\":\"editingPages_form_wrapper__jUVi3\",\"top_wrapper\":\"editingPages_top_wrapper__27tcK\",\"btn\":\"editingPages_btn__hISJi\",\"errorMessageWrapper\":\"editingPages_errorMessageWrapper__AamDs\",\"errorMessage\":\"editingPages_errorMessage__s7QUV\"};","// extracted by mini-css-extract-plugin\nexport default {\"input_main_wrapper\":\"FormInput_input_main_wrapper__ujvJw\",\"input_field\":\"FormInput_input_field__QYl9j\",\"label\":\"FormInput_label__04RR4\",\"input\":\"FormInput_input__uBaqY\",\"label_active\":\"FormInput_label_active__6tHVz\",\"red_message\":\"FormInput_red_message__1EyIk\"};","import React from 'react';\nimport { Field, ErrorMessage } from 'formik';\nimport cl from './FormInput.module.scss';\n\n\nfunction FormInput(props) {\n    const { label, name, placeholder, hasError, value, touched, ...rest } = props\n\n    return (\n        <div\n            className={`${cl.input_main_wrapper} input_main_wrapper`}\n        >\n\n            <div\n                className={cl.input_field}\n            >\n                <label\n                    htmlFor={name}\n                    className={`${`${cl.label} label`} ${value && `${cl.label_active} label_active`}`}\n                >\n                    {placeholder}\n                </label>\n                <Field\n                    className={`${`${cl.input} input`} ${hasError ? `${cl.has_errors} has_errors` : touched && `${cl.correct} correct`}`}\n                    as=\"input\"\n                    id={name}\n                    name={name}\n                    {...rest}\n                />\n            </div>\n\n            <span className={`${cl.red_message} red_message`}>\n                <ErrorMessage name={name} />\n            </span>\n\n        </div>\n    )\n}\n\nexport default FormInput;","import { useState } from \"react\";\n\nexport const useFetching = (callback: Function) => {\n    const [Loading, setLoading] = useState(false);\n    const [error, setError] = useState('');\n\n    const fetching = async (...args: any) => {\n        try {\n            setLoading(true)\n            await callback(...args)\n        } catch (e: any) { // TODO type error\n            setError(e.message)\n        } finally {\n            setLoading(false)\n        }\n    }\n\n    return [fetching, Loading, error] as const\n}","import React, { useState } from 'react'\nimport GoBack from '../components/GoBack/GoBack';\nimport cl from '../editingPages.module.scss';\nimport * as Yup from 'yup';\nimport { Formik, Form } from 'formik'\nimport { useFetching } from '../../../hooks/useFetching';\nimport axios from 'axios';\nimport { basic_url, getHeaders } from '../../../API/APISettings';\nimport FormInput from '../../../components/UI/FormInput/FormInput';\nimport { useNavigate } from 'react-router-dom';\nimport { store } from '../../../reducers/index';\nimport { CHANGE_USER_INFO } from '../../../reducers/auth';\nimport { useSelector } from 'react-redux';\n\nimport Loader from '../../../components/UI/Loader/Loader';\nimport MainLayout from '../components/MainLayout/MainLayout';\n\n\n\nfunction EditNamePage() {\n    const navigate = useNavigate()\n\n    const initial_first_name = useSelector(state => state.auth.user.first_name)\n    const initial_last_name = useSelector(state => state.auth.user.last_name)\n\n    const initialValues = {\n        first_name: initial_first_name,\n        last_name: initial_last_name\n    }\n\n    const validationSchema = Yup.object().shape({\n        first_name: Yup.string()\n            .required(\"Required\")\n            .max(150),\n        last_name: Yup.string()\n            .max(150)\n    })\n\n    const [errorsArr, setErrorsArr] = useState([])\n\n    const [editName, LoadingEditName] = useFetching(async (values) => {\n        const body = values\n\n        let data_is_the_same = body.first_name === initial_first_name && body.last_name === initial_last_name\n\n        if (data_is_the_same) {\n            navigate(-1)\n            return\n        }\n\n        await axios.post(`${basic_url}/users/edit_name/`, body, {\n            headers: getHeaders(),\n        })\n            .then(res => {\n                setErrorsArr([])\n\n                store.dispatch({\n                    type: CHANGE_USER_INFO,\n                    payload: res.data.user,\n                })\n\n                navigate(-1)\n            })\n            .catch(err => {\n                switch (err.response?.status) {\n                    case \"400\":\n                        setErrorsArr(err.response.data.messages)\n                        break;\n                    case \"401\":\n                        setErrorsArr([\"Unauthorized\"])\n                        break;\n                    case \"500\":\n                        setErrorsArr([\"Internal Server Error\"])\n                        break;\n                    default:\n                        setErrorsArr([\"Smth went wrong. Try again\"])\n                }\n            });\n    })\n\n\n    function onSubmit(values) {\n        editName(values)\n    }\n\n    return (\n\n        <MainLayout>\n            {LoadingEditName &&\n                <div className='loader_wrapper'>\n                    <Loader />\n                </div>\n            }\n            <Formik\n                initialValues={initialValues}\n                validationSchema={validationSchema}\n                onSubmit={onSubmit}\n            >\n                {({ errors, touched }) => (\n                    <Form className={cl.form_wrapper}>\n\n                        <div className={cl.top_wrapper}>\n                            <GoBack />\n\n                            <span>\n                                Edit name\n                            </span>\n\n                            <button className={cl.btn} type='submit'>\n                                Hello\n                            </button>\n                        </div>\n\n                        <FormInput name=\"first_name\" placeholder=\"Firstname\" autoFocus={true} />\n\n                        <FormInput name=\"last_name\" placeholder=\"Lastname\" />\n\n                        {errorsArr &&\n                            <div className={cl.errorMessageWrapper}>\n                                {errorsArr.map((error, index) =>\n                                    <span key={index} className={cl.errorMessage}>\n                                        {error}\n                                    </span>\n                                )}\n                            </div>\n                        }\n\n                    </Form>\n                )}\n            </Formik>\n        </MainLayout>\n    )\n}\n\nexport default EditNamePage;","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"GoBack_wrapper__hQ1MT\",\"arrow_icon\":\"GoBack_arrow_icon__n2l5R\"};","import React from 'react'\nimport cl from './GoBack.module.scss';\nimport { useNavigate } from 'react-router-dom';\n\nfunction GoBack() {\n\n    const navigate = useNavigate();\n\n    function goBack() {\n        navigate(-1)\n    }\n\n    return (\n        <span onClick={goBack} className={cl.wrapper}>\n            <span className={cl.arrow_icon}>\n                &lt;-\n            </span>\n        </span>\n    )\n}\n\nexport default GoBack","// extracted by mini-css-extract-plugin\nexport default {\"main_wrapper\":\"MainLayout_main_wrapper__Y7jWB\",\"main_content_wrapper\":\"MainLayout_main_content_wrapper__LrLzF\"};","import React from 'react'\nimport cl from './MainLayout.module.scss';\n\n\nfunction MainLayout({ children }) {\n    return (\n\n        <div className={cl.main_wrapper}>\n            <div className={cl.main_content_wrapper}>\n                {children}\n            </div>\n        </div>\n    )\n}\n\nexport default MainLayout"],"names":["props","label","name","placeholder","hasError","value","touched","rest","className","cl","htmlFor","as","id","useFetching","callback","useState","Loading","setLoading","error","setError","fetching","message","navigate","useNavigate","initial_first_name","useSelector","state","auth","user","first_name","initial_last_name","last_name","initialValues","validationSchema","Yup","shape","required","max","errorsArr","setErrorsArr","values","body","axios","basic_url","headers","getHeaders","then","res","store","type","CHANGE_USER_INFO","payload","data","catch","err","response","status","messages","editName","LoadingEditName","onSubmit","errors","autoFocus","map","index","onClick","children"],"sourceRoot":""}