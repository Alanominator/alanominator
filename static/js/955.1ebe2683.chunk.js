"use strict";(self.webpackChunkalanominator=self.webpackChunkalanominator||[]).push([[955],{487:function(e,a){a.Z={errorMessageWrapper:"authPages_errorMessageWrapper__1nb9r",errorMessage:"authPages_errorMessage__cn6Eo",form_wrapper:"authPages_form_wrapper__I9-Yl",form:"authPages_form__mwH6E",page_name:"authPages_page_name__-ata5",lw:"authPages_lw__b9ZJ1",ttl:"authPages_ttl__KbgBc",link:"authPages_link__ll6x-",help_link:"authPages_help_link__VMlan",help_wrapper:"authPages_help_wrapper__4ETRw",reCaptcha_wrapper:"authPages_reCaptcha_wrapper__bduQh",captcha_loading:"authPages_captcha_loading__YQc+l",captcha_loading_message:"authPages_captcha_loading_message__mjU5w",cancelBtnWrapper:"authPages_cancelBtnWrapper__ey8-O",cancelBtn:"authPages_cancelBtn__undoL"}},5827:function(e,a,s){s.d(a,{Z:function(){return c}});var r=s(1413),t=(s(390),"FormButton_button_wrapper__K6Ek-"),n="FormButton_button__saLZQ",o=s(2559);var c=function(e){var a=e.children,s=e.disabled;return(0,o.jsx)("div",{className:t,children:(0,o.jsx)("button",(0,r.Z)((0,r.Z)({className:"".concat(n," button"),type:"submit",disabled:s},e),{},{children:a}))})}},2329:function(e,a,s){s.d(a,{Z:function(){return u}});var r=s(1413),t=s(4925),n=(s(390),s(2163)),o={input_main_wrapper:"FormInput_input_main_wrapper__ujvJw",input_field:"FormInput_input_field__QYl9j",label:"FormInput_label__04RR4",input:"FormInput_input__uBaqY",label_active:"FormInput_label_active__6tHVz",red_message:"FormInput_red_message__1EyIk"},c=s(2559),i=["label","name","placeholder","hasError","value","touched"];var u=function(e){e.label;var a=e.name,s=e.placeholder,u=e.hasError,p=e.value,l=e.touched,_=(0,t.Z)(e,i);return(0,c.jsxs)("div",{className:"".concat(o.input_main_wrapper," input_main_wrapper"),children:[(0,c.jsxs)("div",{className:o.input_field,children:[(0,c.jsx)("label",{htmlFor:a,className:"".concat("".concat(o.label," label")," ",p&&"".concat(o.label_active," label_active")),children:s}),(0,c.jsx)(n.gN,(0,r.Z)({className:"".concat("".concat(o.input," input")," ",u?"".concat(o.has_errors," has_errors"):l&&"".concat(o.correct," correct")),as:"input",id:a,name:a},_))]}),(0,c.jsx)("span",{className:"".concat(o.red_message," red_message"),children:(0,c.jsx)(n.Bc,{name:a})})]})}},2208:function(e,a,s){s.d(a,{U:function(){return i}});var r=s(5861),t=s(885),n=s(7757),o=s.n(n),c=s(390),i=function(e){var a=(0,c.useState)(!1),s=(0,t.Z)(a,2),n=s[0],i=s[1],u=(0,c.useState)(""),p=(0,t.Z)(u,2),l=p[0],_=p[1],d=function(){var a=(0,r.Z)(o().mark((function a(){var s=arguments;return o().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,i(!0),a.next=4,e.apply(void 0,s);case 4:a.next=9;break;case 6:a.prev=6,a.t0=a.catch(0),_(a.t0.message);case 9:return a.prev=9,i(!1),a.finish(9);case 12:case"end":return a.stop()}}),a,null,[[0,6,9,12]])})));return function(){return a.apply(this,arguments)}}();return[d,n,l]}},9955:function(e,a,s){s.r(a);var r,t=s(5861),n=s(1413),o=s(885),c=s(7757),i=s.n(c),u=s(390),p=s(5453),l=s(2163),_=s(2208),d=s(5133),w=s.n(d),h=s(2619),m=s(5827),f=s(2329),g=s(361),v=s(487),Z=s(847),P=s(2714),x=s(7353),b=s(2559);!function(e){e.sendActivationPassword="sendActivationPassword",e.setNewPassword="setNewPassword",e.checkResetPassword="checkResetPassword"}(r||(r={})),a.default=function(){var e=(0,x.VY)(),a=(0,P.$)().t,s=(0,g.s0)(),c=(0,u.useState)(""),d=(0,o.Z)(c,2),k=d[0],j=d[1],N=(0,u.useState)(r.sendActivationPassword),y=(0,o.Z)(N,2),S=y[0],R=y[1],E=function(){var e={email:"",reset_password:"",new_password:"",confirm_new_password:""},a=JSON.parse(localStorage.getItem("reset_password__form_values")),s=Object.keys(e);if(!s.every((function(e){return Object.keys(a).includes(e)})))return e;var r={};return s.forEach((function(e){r[e]=a[e]})),r}();(0,u.useEffect)((function(){E.email&&(E.reset_password?R(r.setNewPassword):R(r.checkResetPassword))}),[E]),(0,u.useEffect)((function(){!function(){switch(S){case r.sendActivationPassword:break;case r.checkResetPassword:O((0,n.Z)((0,n.Z)({},B),{},{reset_password:p.Z_().required(F).length(5)}));break;case r.setNewPassword:O((0,n.Z)((0,n.Z)({},B),{},{new_password:p.Z_().required(F),confirm_new_password:p.Z_().required(F)}));break;default:console.error("something went wrong")}}()}),[S]);var F=a("main_content.pages.auth_pages.required","Required"),C=(0,u.useState)({email:p.Z_().email(a("main_content.pages.auth_pages.ief","Invalid email format")).required(F)}),I=(0,o.Z)(C,2),B=I[0],O=I[1],M=p.Ry().shape((0,n.Z)({},B)),T=(0,_.U)(function(){var a=(0,t.Z)(i().mark((function a(s){var t;return i().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=JSON.stringify(s),a.next=3,w().post("".concat(h.rh,"/users/reset_password__send_instructions/"),t,{headers:{"Content-Type":"application/json"}}).then((function(a){e.success(a.data.message),R(r.checkResetPassword),j(""),localStorage.setItem("reset_password__form_values",t)})).catch((function(e){e.response?j(e.response.data.message):j("Smth went wrong. Try again.")}));case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()),q=(0,o.Z)(T,2),A=q[0],J=q[1],W=(0,_.U)(function(){var a=(0,t.Z)(i().mark((function a(s){var t;return i().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=JSON.stringify(s),console.log(t),a.next=4,w().post("".concat(h.rh,"/users/reset_password__check_reset_password/"),t,{headers:{"Content-Type":"application/json"}}).then((function(a){e.success(a.data.message),R(r.setNewPassword),j(""),localStorage.setItem("reset_password__form_values",t)})).catch((function(e){e.response?j(e.response.data.message):j("Smth went wrong. Try again.")}));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()),U=(0,o.Z)(W,2),Y=U[0],Q=U[1],V=(0,_.U)(function(){var a=(0,t.Z)(i().mark((function a(r){var t;return i().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=JSON.stringify(r),console.log(t),a.next=4,w().post("".concat(h.rh,"/users/reset_password__set_new_password/"),t,{headers:{"Content-Type":"application/json"}}).then((function(a){e.success(a.data.message),j(""),localStorage.removeItem("reset_password__form_values"),s("/users/login")})).catch((function(e){e.response?j(e.response.data.message):j("Smth went wrong. Try again.")}));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()),H=(0,o.Z)(V,2),K=H[0],L=H[1];function z(){console.log("TODO")}return(0,b.jsxs)(b.Fragment,{children:[(J||Q||L)&&(0,b.jsx)("div",{className:"loader_wrapper",children:(0,b.jsx)(Z.Z,{})}),k&&(0,b.jsx)("div",{className:"".concat(v.Z.errorMessageWrapper),children:(0,b.jsx)("span",{className:"".concat(v.Z.errorMessage," errorMessage"),children:k})}),(0,b.jsx)("div",{className:v.Z.form_wrapper,children:(0,b.jsx)(l.J9,{initialValues:E,validationSchema:M,onSubmit:function(){switch(S){case r.sendActivationPassword:A(E);break;case r.checkResetPassword:Y(E);break;case r.setNewPassword:K(E);break;default:console.error("something went wrong")}},children:function(e){var s=e.errors,t=e.touched,n=e.values;return(0,b.jsxs)(l.l0,{className:"".concat(v.Z.form," form"),autoComplete:"off",children:[(0,b.jsx)("b",{className:"".concat(v.Z.page_name," auth_page_name"),children:"Reseting password"}),(0,b.jsx)(f.Z,{name:"email",placeholder:a("main_content.pages.auth_pages.email","email"),type:"email",autoFocus:!0,value:n.email,touched:t.email,hasError:s.email,spellCheck:"false",autoComplete:"true",disabled:S===r.checkResetPassword||S===r.setNewPassword}),function(){switch(S){case r.sendActivationPassword:return(0,b.jsx)(b.Fragment,{});case r.checkResetPassword:return(0,b.jsx)(f.Z,{name:"reset_password",placeholder:"reset password",type:"text",inputMode:"numeric",value:n.reset_password,touched:t.reset_password,hasError:s.reset_password});case r.setNewPassword:return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(f.Z,{name:"new_password",placeholder:"new password",type:"password",value:n.new_password,touched:t.new_password,hasError:s.new_password,autoComplete:"off"}),(0,b.jsx)(f.Z,{name:"confirm_new_password",placeholder:"confirm_new_password",type:"password",value:n.confirm_new_password,touched:t.confirm_new_password,hasError:s.confirm_new_password,autoComplete:"off"})]});default:return(0,b.jsx)(b.Fragment,{children:"ERROR"})}}(),(0,b.jsx)(m.Z,{type:"submit",children:function(){switch(S){case r.sendActivationPassword:return"Send instructions";case r.checkResetPassword:return"Check the reset password";case r.setNewPassword:return"Set new password"}}()}),S===r.checkResetPassword||S===r.setNewPassword?(0,b.jsx)("div",{className:v.Z.cancelBtnWrapper,children:(0,b.jsx)("span",{className:v.Z.cancelBtn,onClick:z,children:"cancel"})}):(0,b.jsx)(b.Fragment,{})]})}})})]})}}}]);
//# sourceMappingURL=955.1ebe2683.chunk.js.map