(self.webpackChunkalanominator=self.webpackChunkalanominator||[]).push([[41],{1041:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return ue}});var t=n(2982),r=n(885),a=n(390),o="chatPages_main_wrapper__emH7z",i="chatPages_main_content_wrapper__GaUSq",c="chatPages_main_content__cBMLE",u="chatPages_main__ETfJy",l="chatPages_top_wrapper__eSiqQ",m="chatPages_top_wrapper_content__3+uv1",f="chatPages_notConncetedMessageWrapper__XMpB7",p="chatPages_notConncetedMessageContent__WeR9v",g="chatPages_notConncetedMessageText__3JcEp",_="chatPages_notConncetedMessageSpinnerWrapper__spRk-",d="chatPages_notConncetedMessageSpinner__8VkA5",h="chatPages_conncetedMessage__1xv3C",v="chatPages_messages_wrapper__rYXBw",x="chatPages_messages_content__AzcGE",b="chatPages_messages_date_group__6McBH",N="chatPages_sticky_date_wrapper__FnCTn",y="chatPages_sticky_date__hnV0S",j="chatPages_no_messages_yet_text_wrapper__yMIfh",w="chatPages_no_messages_yet_text__+utWA",E="chatPages_messageFormWrapper__1nFHx",C="chatPages_scrollDownBtn__oo7rp",P="chatPages_scrollDownBtnVisible__OOYH4",S="chatPages_scrollDownBtnEnterActive__xOgAJ",T="chatPages_scrollDownBtnEnterDone__jwcUL",M="chatPages_scrollDownBtnExitActive__SDIJu",O="chatPages_scrollDownBtnExitDone__JeTsd",A="chatPages_lastChild__EbNuK",D=n(9686),Z="Message_main_wrapper__KfQhF",k="Message_outgoing__Czv18",F="Message_content_wrapper__YXMP5",I="Message_incoming__4XSj1",R="Message_content__OyRqi",B="Message_username__BI7wd",W="Message_message_text__+TrvY",L="Message_message_info__6trrl",H="Message_time__H80x7",U=n(2559),V=function(e){var s=e.isOutgoing;return(0,U.jsxs)("div",{className:L,children:[(0,U.jsx)("span",{className:H,children:"12:13"}),function(){if(s)return(0,U.jsx)("span",{children:"+"})}()]})},J=function(e){var s=e.data,n=e.isOutgoing;return(0,U.jsx)("div",{className:"".concat(Z," ").concat(n?k:I),children:(0,U.jsx)("div",{className:"".concat(F),children:(0,U.jsxs)("div",{className:R,children:[!n&&(0,U.jsx)("span",{className:B,children:"Alanominator"}),(0,U.jsxs)("div",{className:W,children:[s.message,(0,U.jsx)(V,{isOutgoing:n})]})]})})})},X={formWrapper:"MessageForm_formWrapper__AOEQF",smiles_button_wrapper:"MessageForm_smiles_button_wrapper__gP2TA",message_textarea_wrapper:"MessageForm_message_textarea_wrapper__eXNqk",message_input:"MessageForm_message_input__Ce6ZY",button:"MessageForm_button__f+VXG",openSendFile:"MessageForm_openSendFile__qNUtC"},Y=n(3143),$=n.n(Y),q=function(e){var s=e.message,n=e.inputElementRef,t=e.onInputChange;return(0,U.jsx)("div",{className:X.message_textarea_wrapper,children:(0,U.jsx)("textarea",{placeholder:"Message",value:s,ref:n,className:X.message_input,onChange:t,rows:1,wrap:"off"})})},G=function(e){var s=e.message,n=e.setMessage,t=e.onSubmit,r=e.setIsUserTyping,o=(0,a.useRef)(null),i=(0,a.useRef)(null),c=$()((function(){r(!1)}),850);return(0,U.jsxs)("form",{ref:i,className:X.formWrapper,onSubmit:function(e){e.preventDefault(),t(),o.current&&(o.current.style.height="auto",o.current.focus())},children:[(0,U.jsx)("div",{className:X.smiles_button_wrapper,children:(0,U.jsx)("div",{className:X.smiles_button,children:":]"})}),(0,U.jsx)(q,{message:s,inputElementRef:o,onInputChange:function(e){if(e.preventDefault(),o.current){o.current.style.height="auto";var s=o.current.scrollHeight;o.current.style.height="".concat(s,"px")}n(e.target.value),r(!0),c()}}),s.trim()?(0,U.jsx)("button",{type:"submit",className:X.button,children:"Send"}):(0,U.jsx)("div",{className:X.openSendFile,children:"file"})]})},z=n(847);var Q=n(3285),K=n(3992),ee=n(139);function se(e,s){return e.replace(new RegExp("(^|\\s)"+s+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var ne=n(5558),te=function(e,s){return e&&s&&s.split(" ").forEach((function(s){return t=s,void((n=e).classList?n.classList.remove(t):"string"===typeof n.className?n.className=se(n.className,t):n.setAttribute("class",se(n.className&&n.className.baseVal||"",t)));var n,t}))},re=function(e){function s(){for(var s,n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return(s=e.call.apply(e,[this].concat(t))||this).appliedClasses={appear:{},enter:{},exit:{}},s.onEnter=function(e,n){var t=s.resolveArguments(e,n),r=t[0],a=t[1];s.removeClasses(r,"exit"),s.addClass(r,a?"appear":"enter","base"),s.props.onEnter&&s.props.onEnter(e,n)},s.onEntering=function(e,n){var t=s.resolveArguments(e,n),r=t[0],a=t[1]?"appear":"enter";s.addClass(r,a,"active"),s.props.onEntering&&s.props.onEntering(e,n)},s.onEntered=function(e,n){var t=s.resolveArguments(e,n),r=t[0],a=t[1]?"appear":"enter";s.removeClasses(r,a),s.addClass(r,a,"done"),s.props.onEntered&&s.props.onEntered(e,n)},s.onExit=function(e){var n=s.resolveArguments(e)[0];s.removeClasses(n,"appear"),s.removeClasses(n,"enter"),s.addClass(n,"exit","base"),s.props.onExit&&s.props.onExit(e)},s.onExiting=function(e){var n=s.resolveArguments(e)[0];s.addClass(n,"exit","active"),s.props.onExiting&&s.props.onExiting(e)},s.onExited=function(e){var n=s.resolveArguments(e)[0];s.removeClasses(n,"exit"),s.addClass(n,"exit","done"),s.props.onExited&&s.props.onExited(e)},s.resolveArguments=function(e,n){return s.props.nodeRef?[s.props.nodeRef.current,e]:[e,n]},s.getClassNames=function(e){var n=s.props.classNames,t="string"===typeof n,r=t?""+(t&&n?n+"-":"")+e:n[e];return{baseClassName:r,activeClassName:t?r+"-active":n[e+"Active"],doneClassName:t?r+"-done":n[e+"Done"]}},s}(0,ee.Z)(s,e);var n=s.prototype;return n.addClass=function(e,s,n){var t=this.getClassNames(s)[n+"ClassName"],r=this.getClassNames("enter").doneClassName;"appear"===s&&"done"===n&&r&&(t+=" "+r),"active"===n&&e&&e.scrollTop,t&&(this.appliedClasses[s][n]=t,function(e,s){e&&s&&s.split(" ").forEach((function(s){return t=s,void((n=e).classList?n.classList.add(t):function(e,s){return e.classList?!!s&&e.classList.contains(s):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+s+" ")}(n,t)||("string"===typeof n.className?n.className=n.className+" "+t:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+t)));var n,t}))}(e,t))},n.removeClasses=function(e,s){var n=this.appliedClasses[s],t=n.base,r=n.active,a=n.done;this.appliedClasses[s]={},t&&te(e,t),r&&te(e,r),a&&te(e,a)},n.render=function(){var e=this.props,s=(e.classNames,(0,K.Z)(e,["classNames"]));return a.createElement(ne.ZP,(0,Q.Z)({},s,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},s}(a.Component);re.defaultProps={classNames:""},re.propTypes={};var ae=re,oe=function(e){var s=e.connected;return!1===s?(0,U.jsx)("div",{className:f,children:(0,U.jsxs)("div",{className:p,children:[(0,U.jsx)("span",{className:g,children:"Conncetion failed. Retrying"}),(0,U.jsx)("span",{className:_,children:(0,U.jsx)("span",{className:d})})]})}):s?(0,U.jsx)("span",{className:h}):(0,U.jsx)(U.Fragment,{})},ie=function(e){var s=e.roomname,n=e.connected;return(0,U.jsxs)("div",{className:l,children:[(0,U.jsxs)("div",{className:m,children:["Room: ",s," ."]}),(0,U.jsx)(oe,{connected:n})]})},ce=function(e){var s=e.messages_wrapper_ref,n=e.messages,t=e.username,o=e.scrollDown,i=(0,a.useRef)(),c=(function(e,s,n){var t=(0,a.useRef)();(0,a.useEffect)((function(){var a={root:e.current,rootMargin:"8px",threshold:0};return t.current=new IntersectionObserver((function(e){(0,r.Z)(e,1)[0].isIntersecting&&n()}),a),t.current.observe(s.current),function(){t.current.unobserve(s.current)}}),[n])}(s,i,(function(){console.log("Intersected. Need to load new messages!")})),(0,a.useState)(!1)),u=(0,r.Z)(c,2),l=u[0],m=u[1],f=(0,a.useState)(0),p=(0,r.Z)(f,2),g=p[0],_=p[1],d=function(){if(s.current){var e=s.current,n=Number(e.scrollHeight)-Number(e.scrollTop)-Number(e.offsetHeight);n<100&&m(!1),Math.abs(n-Number(g))>100&&(m(!(n<100||n>g)),_(n))}};return(0,a.useEffect)((function(){return s.current&&s.current.addEventListener("scroll",d),function(){s.current.removeEventListener("scroll",d)}}),[g]),(0,U.jsxs)("div",{className:v,ref:s,children:[(0,U.jsxs)("div",{className:x,children:[(0,U.jsxs)("div",{children:[(0,U.jsx)("span",{ref:i,className:A}),(0,U.jsx)(z.Z,{})]}),Object.keys(n).length?Object.keys(n).map((function(e,s){return(0,U.jsxs)("div",{className:b,children:[(0,U.jsx)("div",{className:N,children:(0,U.jsx)("div",{className:y,children:e})}),n[e].map((function(e,s){return(0,U.jsx)(J,{data:e,isOutgoing:e.username===t},s)}))]},s)})):(0,U.jsx)("div",{className:j,children:(0,U.jsx)("span",{className:w,children:"No messages yet."})})]}),(0,U.jsx)(ae,{in:l,classNames:{enterActive:S,enterDone:T,exitActive:M,exitDone:O},timeout:3e3,children:(0,U.jsx)("div",{onClick:o,className:"".concat(C," ").concat(l&&P),children:"D"})})]})};var ue=function(){var e=(0,a.useRef)(null),s=(0,a.useState)("hello world"),n=(0,r.Z)(s,2),l=n[0],m=n[1],f=(0,a.useState)(!1),p=(0,r.Z)(f,2),g=p[0],_=p[1],d=function(){e.current&&(e.current.scrollTop=e.current.scrollHeight)},h=(0,a.useState)({Tuesday:[{username:"hi",message:"hi"},{username:"some_username",message:"hi"},{username:"hi",message:"hi"},{username:"some_username",message:"hi"},{username:"hi",message:"hi"},{username:"some_username",message:"hi"},{username:"hi",message:"hi"},{username:"some_username",message:"hi"}],Yesterday:[{username:"hi",message:"hi"},{username:"some_username",message:"hi"},{username:"hi",message:"hi"},{username:"some_username",message:"hi"},{username:"hi",message:"hi"},{username:"some_username",message:"hi"},{username:"hi",message:"hi"},{username:"some_username",message:"hi\n  So, What is up?\n hello world\n"}],Today:[{username:"some_username",message:"hi"},{username:"hi",message:"hi"},{username:"hi",message:"\nhello world\n  \u042f \u0441\u043b\u0443\u0447\u0430\u0439\u043d\u043e \u043d\u0430\u0442\u043a\u043d\u0443\u043b\u0430\u0441\u044c \u043d\u0430 \u044d\u0442\u043e\u0433\u043e \u0443\u0447\u0438\u0442\u0435\u043b\u044f, \u0438 \u043c\u043d\u0435 \u0441\u0442\u0430\u043b\u043e \u0441\u0442\u044b\u0434\u043d\u043e, \u0447\u0442\u043e \u044f \u043d\u0435 \u043f\u043e\u043b\u044c\u0437\u0443\u044e\u0441\u044c \u0442\u0430\u043a\u0438\u043c\u0438 \u0446\u0435\u043d\u043d\u044b\u043c\u0438 \u0437\u043d\u0430\u043d\u0438\u044f\u043c\u0438 \u0430\u0431\u0441\u043e\u043b\u044e\u0442\u043d\u043e \u0431\u0435\u0441\u043f\u043b\u0430\u0442\u043d\u043e) \u043f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u044f\u044e\u0441\u044c \u043a \u0431\u043b\u0430\u0433\u043e\u0434\u0430\u0440\u043d\u043e\u0441\u0442\u0438 \ud83d\ude4f\n"},{username:"some_username",message:"hi"},{username:"some_username",message:"hello"},{username:"hi",message:"hi"},{username:"some_username",message:"hi"}]}),v=(0,r.Z)(h,2),x=v[0],b=v[1],N=(0,a.useState)(!1),y=(0,r.Z)(N,2),j=y[0],w=y[1],C="hello",P="hi",S=new D.w3cwebsocket("ws://".concat("192.168.0.106:8000","/ws/chat/",C,"/"));return S.close(),document.getElementsByTagName("body")[0].style.overflow="hidden",(0,a.useEffect)((function(){return d(),function(){document.getElementsByTagName("body")[0].style.overflow="auto",S.close()}}),[]),S.onclose=function(){console.log("closed connection"),w(!1)},S.onmessage=function(e){console.log("onmessage");var s=JSON.parse(e.data);if(s){console.log(s);var n=[].concat((0,t.Z)(x),[s]);b(n),P===s.username&&d()}},(0,a.useEffect)((function(){g&&console.log("typing")}),[g]),(0,U.jsx)("div",{className:o,children:(0,U.jsx)("div",{className:i,children:(0,U.jsx)("div",{className:c,children:(0,U.jsxs)("div",{className:u,children:[(0,U.jsx)(ie,{roomname:C,connected:j}),(0,U.jsx)(ce,{messages_wrapper_ref:e,messages:x,username:P,scrollDown:d}),(0,U.jsx)("div",{className:E,children:(0,U.jsx)(G,{message:l,setMessage:m,onSubmit:function(){var e={username:P,message:l.trim()},s=Object.assign({},x),n=s.Today?s.Today:[];s.Today=[].concat((0,t.Z)(n),[e]),new Promise((function(e){b(s),e(1)})).then((function(){d()})),m("")},setIsUserTyping:_})})]})})})})}},3930:function(e){var s=function(){if("object"===typeof self&&self)return self;if("object"===typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};e.exports=function(){if(this)return this;if("object"===typeof globalThis&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return s()}try{return __global__||s()}finally{delete Object.prototype.__global__}}()},6582:function(e,s,n){var t=n(1683).Symbol;e.exports=t},8485:function(e,s,n){var t=n(6582),r=n(7478),a=n(1031),o=t?t.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":o&&o in Object(e)?r(e):a(e)}},3076:function(e,s,n){var t=n(2171),r=/^\s+/;e.exports=function(e){return e?e.slice(0,t(e)+1).replace(r,""):e}},2769:function(e,s,n){var t="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=t},7478:function(e,s,n){var t=n(6582),r=Object.prototype,a=r.hasOwnProperty,o=r.toString,i=t?t.toStringTag:void 0;e.exports=function(e){var s=a.call(e,i),n=e[i];try{e[i]=void 0;var t=!0}catch(c){}var r=o.call(e);return t&&(s?e[i]=n:delete e[i]),r}},1031:function(e){var s=Object.prototype.toString;e.exports=function(e){return s.call(e)}},1683:function(e,s,n){var t=n(2769),r="object"==typeof self&&self&&self.Object===Object&&self,a=t||r||Function("return this")();e.exports=a},2171:function(e){var s=/\s/;e.exports=function(e){for(var n=e.length;n--&&s.test(e.charAt(n)););return n}},3143:function(e,s,n){var t=n(4216),r=n(8905),a=n(9962),o=Math.max,i=Math.min;e.exports=function(e,s,n){var c,u,l,m,f,p,g=0,_=!1,d=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function v(s){var n=c,t=u;return c=u=void 0,g=s,m=e.apply(t,n)}function x(e){return g=e,f=setTimeout(N,s),_?v(e):m}function b(e){var n=e-p;return void 0===p||n>=s||n<0||d&&e-g>=l}function N(){var e=r();if(b(e))return y(e);f=setTimeout(N,function(e){var n=s-(e-p);return d?i(n,l-(e-g)):n}(e))}function y(e){return f=void 0,h&&c?v(e):(c=u=void 0,m)}function j(){var e=r(),n=b(e);if(c=arguments,u=this,p=e,n){if(void 0===f)return x(p);if(d)return clearTimeout(f),f=setTimeout(N,s),v(p)}return void 0===f&&(f=setTimeout(N,s)),m}return s=a(s)||0,t(n)&&(_=!!n.leading,l=(d="maxWait"in n)?o(a(n.maxWait)||0,s):l,h="trailing"in n?!!n.trailing:h),j.cancel=function(){void 0!==f&&clearTimeout(f),g=0,c=p=u=f=void 0},j.flush=function(){return void 0===f?m:y(r())},j}},4216:function(e){e.exports=function(e){var s=typeof e;return null!=e&&("object"==s||"function"==s)}},135:function(e){e.exports=function(e){return null!=e&&"object"==typeof e}},2913:function(e,s,n){var t=n(8485),r=n(135);e.exports=function(e){return"symbol"==typeof e||r(e)&&"[object Symbol]"==t(e)}},8905:function(e,s,n){var t=n(1683);e.exports=function(){return t.Date.now()}},9962:function(e,s,n){var t=n(3076),r=n(4216),a=n(2913),o=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,c=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(a(e))return NaN;if(r(e)){var s="function"==typeof e.valueOf?e.valueOf():e;e=r(s)?s+"":s}if("string"!=typeof e)return 0===e?e:+e;e=t(e);var n=i.test(e);return n||c.test(e)?u(e.slice(2),n?2:8):o.test(e)?NaN:+e}},9686:function(e,s,n){var t;if("object"===typeof globalThis)t=globalThis;else try{t=n(3930)}catch(i){}finally{if(t||"undefined"===typeof window||(t=window),!t)throw new Error("Could not determine global this")}var r=t.WebSocket||t.MozWebSocket,a=n(4994);function o(e,s){return s?new r(e,s):new r(e)}r&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach((function(e){Object.defineProperty(o,e,{get:function(){return r[e]}})})),e.exports={w3cwebsocket:r?o:null,version:a}},4994:function(e,s,n){e.exports=n(9794).version},2982:function(e,s,n){"use strict";n.d(s,{Z:function(){return a}});var t=n(907);var r=n(181);function a(e){return function(e){if(Array.isArray(e))return(0,t.Z)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,r.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},9794:function(e){"use strict";e.exports={version:"1.0.34"}}}]);
//# sourceMappingURL=41.752fdd5e.chunk.js.map